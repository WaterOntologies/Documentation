<!DOCTYPE html>
<html>

<head>
  <title>Encoding units and unit types in RDF using QUDT</title>
    <script src='js/respec.js' class='remove'></script>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
    <script class='remove'>
      var respecConfig = {
          // document info
          orguri:               "http://www.openphacts.org/specs/",
          orgicon:              "<a href='http://www.openphacts.org/'><img height='100' src='../logo/ops.png' alt='Open PHACTS'/></a>",
          customorg:            "Open PHACTS",
          customcss:            "../css/ops.css",
          specStatus:           "ED",
          shortName:            "units",
          // publishDate:   "2012-11-21",
          // previousMaturity: "WD",
          // previousPublishDate:  "2009-03-15",
          // previousURI : "http://dev.w3.org/2009/dap/ReSpec.js/documentation.html",
          copyrightStart:       "2012",
          edDraftURI:           "http://www.bigcat.unimaas.nl/~egonw/rdfguide/",
          // lcEnd:  "2010-08-06",
          // extraCSS:             ["../css/respec.css"],
          extraCSS:             ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css"],

          // editors (optional)
            editors:  [
               { name: "Egon Willighagen", url: "http://chem-bla-ics.blogpost.com/",
                  company: "Maastricht University", companyURL: "http://www.maastrichtuniversity.nl/" },
            ],
//           authors:  [
//              { name: "Egon Willighagen", url: "http://chem-bla-ics.blogpost.com/",
//                 company: "Maastricht University", companyURL: "http://www.maastrichtuniversity.nl/" },
//           ],
          
          // WG
          //wg:           "People Who Like To Write Specs Help Group",
          //wgURI:        "http://berjon.com/",
          //wgPublicList: "spec-writers-anonymous",
          //wgPatentURI:  "",
      };
    </script>
</head>

<body>
  <section id="sotd"> <!-- this section is obligatory, per Open PHACTS project requirements .. -->
    <h4>Disclaimer</h4>
    <p>
      The research leading to these results has received
      support from the Innovative Medicines Initiative
      (<a href="http://www.imi.europa.eu/">IMI</a>) Joint Undertaking under
      grant agreement n° 115191, resources of which are composed of financial
      contribution from the European Union's Seventh Framework Programme
      (FP7/2007-2013) and EFPIA companies’ in kind contribution.<br />
      <img src="../logo/imi.jpg" height="80"/>
      <img src="../logo/eu.jpg" height="80"/>
      <img src="../logo/efpia.jpg" height="80"/>
    </p>
    <h4>Intended audience</h4>
    <p>
      These guidelines are intended for data providers who want to expose their data as RDF to the Open
      PHACTS platform.
    </p>
  </section>
  <section id="abstract">
    This guideline describes how units for data are preferably encoded, setting a standard that can then
    be handled uniformly by data consumers.
  </section>
  <section class='informative'>
    <h2>Introduction</h2>
    <p>
      One of the goals of Open PHACTS is to provide a uniform platform for integration of data important
      to drug discovery [[Williams2012]]. There are many aspects of the data in the integrated resources
      that need consideration, but this guideline focuses on provide machine readable access to unit
      and unit type information.
    </p>
    <p>
      The importance of making that information machine readable is that it allow consumers to search for
      data in a uniform way. That is, the platform no longer relies on data providers to use the same
      units. For data providers it means that they can just provide their data in the original units.
      For example, the ChEMBL database tracks both the units used in the data sources (e.g. literature)
      as well as report a standard unit. That allows the ChEMBL web interface to search drugs with
      IC<sub>50</sub> value below a certain molarity expressed in nM.
      However, a major downside of this approach is that it requires to standardize these values
      explicitly in the database, and it requires search interfaces to still use this unit.
    </p>
    <p>
      A solution to this is to use a unit ontology, like the QUDT ontology (Quantities, Units,
      Dimensions, and Types). Using such semantic annotation, we can reason on how to convert
      units of the same type into each other. For example, it allows us to convert micromolar into
      nanomolar automatically. Even more, if search engines use the ontology too, the user can
      search in any molar unit type, and the data can capture the data in any unit type.
    </p>
    </p>
      In fact, the QUDT ontology does not only provide entries for units, it also provides a full
      framework to express how units can be interconverted. Of course, this is limited to units of
      the same type, e.g. molar concentration. It does not provide us means to convert a molar
      concentration into a weight per volume unit. That would require additional information on
      the subject of study, such as the molecular weight, but also information about purity.
    <p>
  </section>
  <section class='informative'>
    <h2>Encoding measurements</h2>
    <p>
      If we have a measure quantity, we can associate the value and the unit of that quantity.
      We can use custom predicated for that, as in this example from ChEMBL-RDF:
    </p>
    <pre>
chembl:a31876 chembl:standardValue "24000.0"^^xsd:float .
chembl:a31876 chembl:standardUnit &lt;http://www.openphacts.org/units/Nanomolar&gt; .
    </pre>
    <p>
      We explictly encoded the literal to be a float, using the XML Schema data type
      xsd:float.
    </p>
  </section>
  <section class="informative">
    <h2>Encoding units</h2>
    <p>
      The QUDT ontology comes with an extensive list of units, but not all are defined. However,
      the ontology provides the means to specify further units using the ontology itself.
      For example, for Open PHACTS various additional units have been defined.
    </p>
    <p>
      In the following example, we will define the millimolar unit. For this, we first need to
      define the molar. A molar is of the MolarConcentrationUnit type and a SI-derived unit.
      We further specify human readable label, abbreviation, and symbol. We also link to
      <a href="http://www.dbpedia.org/">DBPedia</a>
      for further information. But, importantly, we define the information we need to convert
      units of the same type into each other. For this we define an offset and a multiplier.
      Only the latter is needed for conversion from nanomolar to millimolar (etc), but the offset
      we may need for other unit types, such as temperature when you like to convert Kelvin into
      Celsius. For molar we then get the following base type:
    </p>
    <pre>
ops:Molar
 rdf:type qudt:MolarConcentrationUnit , qudt:SIDerivedUnit ;
 rdfs:label "Molar"^^xsd:string ;
 qudt:abbreviation "M"^^xsd:string ;
 qudt:conversionMultiplier
  1000 ;
 qudt:conversionOffset
  "0.0"^^xsd:double ;
 qudt:symbol "mol/dm^3"^^xsd:string ;
 skos:exactMatch &lt;http://dbpedia.org/resource/Molar_concentration> .
    </pre>
    <p>
      We note that we have a multiplier from the most basic concentration unit in QUDT,
      which (unfortunately) is not explicitly referenced in this definition.
    </p>
    <p>
      For variants we basically just repeat this definition, but then with different conversion
      coefficients. For example, for millimolar we can define:
    </p>
    <pre>
ops:Millimolar    
 rdf:type qudt:MolarConcentrationUnit , qudt:SIDerivedUnit ;
 rdfs:label "Millimolar"^^xsd:string ;
 qudt:abbreviation "mM"^^xsd:string ;
 qudt:conversionMultiplier
  1 ;
 qudt:conversionOffset
  "0.0"^^xsd:double ; 
 qudt:symbol "mmol/dm^3"^^xsd:string .
    </pre>
  </section>
  <section>
    <h2>Converting units</h2>
    <p>
      Because the ontology defines how units of the same base type can be interconverted,
      this can be computationally performed. For example, we can use the jqudt library
      for this [[Willighagen2012jQUDT]], as shown in the below Java source code example.
    </p>
    <p>
Source:
    </p>
    <pre>
    Quantity obs = new Quantity(0.1, Micromolar.getInstance());
    System.out.println(obs + " = " +  obs.convertTo(Nanomolar.getInstance()));
    
    Quantity temp = new Quantity(20, TemperatureUnit.CELSIUS);
    System.out.println(temp + " = " +  temp.convertTo(TemperatureUnit.KELVIN));
    </pre>
    <p>
Output:
    </p>
    <pre>
    0.1 μM = 100.00000000000001 nM
    20.0 C = 293.0 K
    </pre>
  </section>
</body>

</html>
